@case_id=6504749
@section=BI_Event_Consumer
@priority=P1
@reference=ANA-127674
@test_type=User_Story_Acceptance
@use_case=ACF
@execution_type=Automated

!lastmodified

!*< Setup
!path lib/*.jar
!|dbfit.PostgresTest|
!|ConnectUsingFile|${env} |
!define tablename {f_application_decision}
*!
!3 '''Description:'''     Purpose of the test is to verify table structure, primary keys  and index keys on table '''${tablename}'''


!4 '''Test 1:'''  This Test is to Validate Table structure of Table ${tablename}
!*> '''Given''' Given that table is defined in BI Data Model
*!
!*> '''When''' Code is deployed into QA environment developed by dev team
some code here --- if you are deploying the code
*!
!*> '''Then''' Verify that table and it's structure is as per the interface document
!|query|${tablesql} and column_name not in ('rec_insert_timestamp') and table_schema='public' order by ordinal_position|
|ordinal_position|column_name                      |udt_name   |character_maximum_length|is_nullable|numeric_precision|numeric_precision_radix|numeric_scale|datetime_precision|
|1               |clientid                         |text       |null                    |NO         |null             |null                   |null         |null              |
|2               |applicationnumber                |text       |null                    |NO         |null             |null                   |null         |null              |
|3               |applicationcreationtimestamp     |timestamptz|null                    |NO         |null             |null                   |null         |6                 |
|4               |applicationcreationlocaltimestamp|timestamp  |null                    |NO         |null             |null                   |null         |6                 |
|5               |applicationcreationlocaldatekey  |int4       |null                    |NO         |32               |2                      |0            |null              |
|6               |applicationcreationlocaltimekey  |int4       |null                    |NO         |32               |2                      |0            |null              |
|7               |applicationupdatetimestamp       |timestamptz|null                    |NO         |null             |null                   |null         |6                 |
|8               |applicationupdatelocaltimestamp  |timestamp  |null                    |NO         |null             |null                   |null         |6                 |
|9               |applicationupdatelocaldatekey    |int4       |null                    |NO         |32               |2                      |0            |null              |
|10              |applicationupdatelocaltimekey    |int4       |null                    |NO         |32               |2                      |0            |null              |
|11              |channel                          |text       |null                    |YES        |null             |null                   |null         |null              |
|12              |applicationstatus                |text       |null                    |YES        |null             |null                   |null         |null              |
|13              |serviceid                        |text       |null                    |YES        |null             |null                   |null         |null              |
|14              |producttype                      |text       |null                    |NO         |null             |null                   |null         |null              |
|16              |worklist                         |text       |null                    |YES        |null             |null                   |null         |null              |
|17              |underwriterid                    |text       |null                    |YES        |null             |null                   |null         |null              |
|20              |bureauscore                      |int4       |null                    |YES        |32               |2                      |0            |null              |
|21              |missinginformationflag           |int4       |null                    |YES        |32               |2                      |0            |null              |
|22              |pidscore                         |int4       |null                    |YES        |32               |2                      |0            |null              |
|23              |kiqscore                         |int4       |null                    |YES        |32               |2                      |0            |null              |
|24              |fraudconfirmed                   |text       |null                    |YES        |null             |null                   |null         |null              |
|26              |strategyname                     |text       |null                    |YES        |null             |null                   |null         |null              |
|27              |userid                           |text       |null                    |YES        |null             |null                   |null         |null              |
|28              |correlationid                    |text       |null                    |YES        |null             |null                   |null         |null              |
|29              |recordcreateddatetime            |timestamptz|null                    |YES        |null             |null                   |null         |6                 |
|30              |decisiontype                     |text       |null                    |YES        |null             |null                   |null         |null              |
|31              |businessserviceid                |text       |null                    |YES        |null             |null                   |null         |null              |
|32              |applicationsource                |text       |null                    |YES        |null             |null                   |null         |null              |
|33              |productid                        |text       |null                    |NO         |null             |null                   |null         |null              |
|34              |productstatus                    |text       |null                    |YES        |null             |null                   |null         |null              |
|35              |amountrequested                  |numeric    |null                    |YES        |10               |10                     |2            |null              |
|36              |decisioner                       |text       |null                    |YES        |null             |null                   |null         |null              |
|37              |decision                         |text       |null                    |YES        |null             |null                   |null         |null              |
|38              |systemdecision                   |text       |null                    |YES        |null             |null                   |null         |null              |
|39              |customerdecision                 |text       |null                    |YES        |null             |null                   |null         |null              |
|40              |amountapproved                   |numeric    |null                    |YES        |10               |10                     |2            |null              |
|41              |termrequested                    |int4       |null                    |YES        |32               |2                      |0            |null              |
|42              |termapproved                     |int4       |null                    |YES        |32               |2                      |0            |null              |
|43              |raterequested                    |numeric    |null                    |YES        |6                |10                     |3            |null              |
|44              |rateapproved                     |numeric    |null                    |YES        |6                |10                     |3            |null              |
|45              |downpaymentrequested             |numeric    |null                    |YES        |10               |10                     |2            |null              |
|46              |downpaymentapproved              |numeric    |null                    |YES        |10               |10                     |2            |null              |
|47              |productcounteroffer              |text       |null                    |YES        |null             |null                   |null         |null              |
|48              |withdraw                         |text       |null                    |YES        |null             |null                   |null         |null              |
|49              |withdrawproduct                  |text       |null                    |YES        |null             |null                   |null         |null              |
|50              |overrideflag                     |text       |null                    |YES        |null             |null                   |null         |null              |
*!
!4 '''Test 2:''' This Test is to verify that Primary Key is defined on correct column for Table ${tablename}
!*> '''Given''' Given that Primary Key is defined in BI Data Model
*!
!*> '''When''' Code is deployed into QA environment developed by dev team

*!
!*> '''Then''' Verify that Primary Key is defined on correct column for Table
!|Query|${pksql}|
|PKColumnName?|
|applicationnumber|
|applicationupdatetimestamp|
|productid|
|producttype|
*!
!4 '''Test 3: ''' Test to Check if Index keys are available on correct column on ${tablename}
!*> '''Given''' Given that Index keys is defined in BI Data Model
*!
!*> '''When''' Code is deployed into QA environment developed by dev team
some code here --- if you are deploying the code
*!
!*> '''Then''' Verify that Index keys is defined on correct column for Table
!|Query|${indexsql}|
|table_name|index_name|column_name|
|f_application_decision|f_application_decision_pk_constraint|applicationnumber|
|f_application_decision|f_application_decision_pk_constraint|applicationupdatetimestamp|
|f_application_decision|f_application_decision_pk_constraint|producttype|
|f_application_decision|f_application_decision_pk_constraint|productid|
*!